/* ==UserStyle==
@name           Notion-Black
@namespace      github.com/openstyles/stylus
@version        1.0
@description    A clean, grid-based, dark theme for Notion.
@author         Brio.plus
==/UserStyle== */

@-moz-document domain("notion.so"), domain("notion.site") {

  /* ======================================================== */
  /*                      CONFIGURATION                       */
  /* ======================================================== */
  :root {
    --nt-border-open: #454545;
    --nt-border-active: #53aaff;

    /* Space BETWEEN lines INSIDE a single block/paragraph. */
    --line-spacing:  0.5em;
    --block-spacing: 0em;
  }


  /* ======================================================== */
  /*                     GENERAL STYLES                       */
  /* ======================================================== */
  .notion-dark-theme { --c-bacPri: #000; }
  .layout a { color: var(--nt-border-active) !important; }
  .layout a span { opacity: 1 !important; }
  .layout { 
    color: #fff !important;
    font-family: "Open Sans", sans-serif, "Monaspace Argon Var";
    font-weight: 300 !important;    
  }
  .notion-page-content {
    font-size: 16px !important;
  }


  /* ======================================================== */
  /*             UNIFIED VERTICAL RHYTHM & GRID               */
  /* ======================================================== */

  /* RULE #1: AGGRESSIVE RESET
     Neutralize ALL vertical margins and paddings on every block and sub-container.
     This is the most critical step. */
  .notion-page-content div[data-block-id],
  .notion-page-content div[data-block-id] > div {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* RULE #2: INTRA-BLOCK SPACING (Line height)
     Sets the space between lines within a single paragraph. */
  div[data-content-editable-leaf="true"] {
    line-height: calc(1em + var(--line-spacing)) !important;
  }

  /* RULE #3: INTER-BLOCK SPACING (Between Blocks)
     This applies a top margin to ALL blocks. This handles both sibling spacing
     and parent-to-first-child spacing uniformly. */
  .notion-page-content .notion-selectable[data-block-id] {
      margin-top: var(--block-spacing) !important;
  }

  /* RULE #4: EXCEPTION FOR THE VERY FIRST BLOCK
     Removes the top margin from the very first block on the page to align it with the top. */
  .notion-page-content > .notion-selectable[data-block-id]:first-child {
      margin-top: 0 !important;
  }

  /* RULE #5: BULLET & TOGGLE ICON ALIGNMENT
     Vertically centers the bullet points and toggle arrows with the first line of text.
     Its height is now controlled by the text's line-height. */
  .notion-list-item-box-left {
    height: calc(1.3em + var(--line-spacing)) !important;
    min-height: auto !important;
    display: flex !important;
    align-items: center !important;
  }

  
  /* ======================================================== */
  /*                   TOGGLE BLOCK BORDERS                   */
  /* ======================================================== */
  .notion-toggle-block {
    border: 1px solid transparent !important;
    border-radius: 10px;
    background-clip: padding-box;
    transition: border-color .5s ease;
  }
  .notion-toggle-block:has(> div [aria-expanded="true"]) {
    border-color: var(--nt-border-open) !important;
  }
  .notion-toggle-block:focus-within:not(:has(.notion-toggle-block:focus-within)) {
    border-color: var(--nt-border-active) !important;
  }
  @media (prefers-reduced-motion: reduce) {
    .notion-toggle-block { transition: none !important; }
  }

  /* complete full width  */
  .layout.layout-wide {
    --margin-width: 30px !important;
  }

  .notion-page-content > div[data-block-id] {
    max-width: 100% !important;
  }    
}
